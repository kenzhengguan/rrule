defmodule TapiRruleTest do
  use ExUnit.Case
  doctest TapiRrule
  alias TapiRrule

  test "with before and after" do
    {:ok, dates} =
      TapiRrule.r_range(
        "DTSTART:20120201T093000Z\nRRULE:FREQ=DAILY;COUNT=3",
        "2012-02-01",
        "2012-04-01"
      )

    assert dates == ["2012-02-01", "2012-02-02", "2012-02-03"]
  end

  test "without before " do
    {:ok, dates} =
      TapiRrule.r_range(
        "DTSTART:20120201T093000Z\nRRULE:FREQ=DAILY;",
        "2012-02-01",
        nil
      )

    assert dates == [
             "2012-02-01",
             "2012-02-02",
             "2012-02-03",
             "2012-02-04",
             "2012-02-05",
             "2012-02-06",
             "2012-02-07",
             "2012-02-08",
             "2012-02-09",
             "2012-02-10",
             "2012-02-11",
             "2012-02-12",
             "2012-02-13",
             "2012-02-14",
             "2012-02-15",
             "2012-02-16",
             "2012-02-17",
             "2012-02-18",
             "2012-02-19",
             "2012-02-20",
             "2012-02-21",
             "2012-02-22",
             "2012-02-23",
             "2012-02-24",
             "2012-02-25",
             "2012-02-26",
             "2012-02-27",
             "2012-02-28",
             "2012-02-29",
             "2012-03-01",
             "2012-03-02",
             "2012-03-03",
             "2012-03-04",
             "2012-03-05",
             "2012-03-06",
             "2012-03-07",
             "2012-03-08",
             "2012-03-09",
             "2012-03-10",
             "2012-03-11",
             "2012-03-12",
             "2012-03-13",
             "2012-03-14",
             "2012-03-15",
             "2012-03-16",
             "2012-03-17",
             "2012-03-18",
             "2012-03-19",
             "2012-03-20",
             "2012-03-21",
             "2012-03-22",
             "2012-03-23",
             "2012-03-24",
             "2012-03-25",
             "2012-03-26",
             "2012-03-27",
             "2012-03-28",
             "2012-03-29",
             "2012-03-30",
             "2012-03-31",
             "2012-04-01",
             "2012-04-02",
             "2012-04-03",
             "2012-04-04",
             "2012-04-05",
             "2012-04-06",
             "2012-04-07",
             "2012-04-08",
             "2012-04-09",
             "2012-04-10",
             "2012-04-11",
             "2012-04-12",
             "2012-04-13",
             "2012-04-14",
             "2012-04-15",
             "2012-04-16",
             "2012-04-17",
             "2012-04-18",
             "2012-04-19",
             "2012-04-20",
             "2012-04-21",
             "2012-04-22",
             "2012-04-23",
             "2012-04-24",
             "2012-04-25",
             "2012-04-26",
             "2012-04-27",
             "2012-04-28",
             "2012-04-29",
             "2012-04-30",
             "2012-05-01",
             "2012-05-02",
             "2012-05-03",
             "2012-05-04",
             "2012-05-05",
             "2012-05-06",
             "2012-05-07",
             "2012-05-08",
             "2012-05-09",
             "2012-05-10"
           ]
  end
end
